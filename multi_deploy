pipeline { 
    agent any
    stages {
        stage('Build Domains') { 
            steps { 
                script {
                	
                	SVN_DOMAIN_NAME.tokenize(",").eachWithIndex { domainName, index ->
                		println "${index+1}. domain ${domainName}"
    					build job: 'ETE Hot Deployment', 
	    					parameters: [
	    						[$class: 'com.cwctravel.hudson.plugins.extended_choice_parameter.ExtendedChoiceParameterValue', name: 'SVN_BRANCH', value: SVN_BRANCH], 
	    						[$class: 'com.cwctravel.hudson.plugins.extended_choice_parameter.ExtendedChoiceParameterValue', name: 'SVN_DOMAIN_NAME', value: domainName], 
	    						string(name: 'DEPLOY_TARGET', value: DEPLOY_TARGET)
	    					]

					}
					

    				
    				
                }
            }
        }
        stage('Build Applications'){
            steps {
                script {
                	
                	SVN_APPLICATION_NAME.tokenize(",").eachWithIndex { appName, index ->
                		println "${index+1}. app ${appName}"
    					build job: 'ETE Hot Deployment', 
	    					parameters: [
	    						[$class: 'com.cwctravel.hudson.plugins.extended_choice_parameter.ExtendedChoiceParameterValue', name: 'SVN_BRANCH', value: SVN_BRANCH], 
	    						[$class: 'com.cwctravel.hudson.plugins.extended_choice_parameter.ExtendedChoiceParameterValue', name: 'SVN_APPLICATION_NAME', value: appName], 
	    						string(name: 'DEPLOY_TARGET', value: DEPLOY_TARGET)
	    					]

					}
					

    				
    				
                }
            }
        }

    }
}